const initEventDelegation=()=>{document.addEventListener("click",(e=>{if(e.target.closest(".order-window__select")){const r=e.target.closest(".order-window__select").closest(".order-window__dropdown"),o=r.querySelector(".order-window__caret"),t=r.querySelector(".order-window__dropdown-menu");o.classList.toggle("rotate"),t.classList.toggle("active")}if(e.target.closest(".order-window__dropdown-menu li")){const r=e.target,o=r.closest(".order-window__dropdown-menu");o.closest(".order-window__dropdown").querySelector(".order-window__selected").textContent=r.textContent,o.classList.remove("active")}if(e.target.closest(".order-window__delete-order")){e.target.closest(".order-window__delete-order").closest(".order-window__order-info").remove()}}))},addNewOrder=()=>{const e=document.querySelector(".order-window__info-container");e.querySelectorAll(".order-window__order-info").length<3?e.innerHTML+='\n      <div class="order-window__order-info">\n        <div class="order-window__dropdown">\n          <div class="order-window__select">\n            <span class="order-window__selected">Вид продукции</span>\n            <svg class="order-window__caret" width="11" height="7" viewBox="0 0 11 7" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path opacity="0.9" d="M9.14038 1L5.14038 5L1.14038 1" stroke="#202020" stroke-width="2" stroke-linecap="round" />\n            </svg>\n          </div>\n          <ul class="order-window__dropdown-menu order-window__dropdown-menu--large">\n            <li class="active">АБС Крупнозернистая Плотная, Тип А</li>\n            <li>АБС Мелкозернистая Плотная ТИП А-1</li>\n            \x3c!-- и так далее --\x3e\n          </ul>\n        </div>\n        <div class="order-window__dropdown">\n          <div class="order-window__select">\n            <span class="order-window__selected">Карьер</span>\n            <svg class="order-window__caret" width="11" height="7" viewBox="0 0 11 7" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path opacity="0.9" d="M9.14038 1L5.14038 5L1.14038 1" stroke="#202020" stroke-width="2" stroke-linecap="round" />\n            </svg>\n          </div>\n          <ul class="order-window__dropdown-menu">\n            <li class="active">Зверосовхоз</li>\n            \x3c!-- и так далее --\x3e\n          </ul>\n        </div>\n        <div class="order-window__time-container" style="margin-right: 10px">\n          <span class="order-window__time-text">Время</span>\n          <div class="order-window__clock-container">\n            <input placeholder="00" type="text" class="order-window__clock" id="orderWindowHour" />\n            <pre>:</pre>\n            <input placeholder="00" type="text" class="order-window__clock" id="orderWindowMinute" />\n          </div>\n        </div>\n        <input class="order-window__input" type="text" name="orderNumber" placeholder="Номер заявки" />\n        <input class="order-window__input" type="text" name="orderWeight" placeholder="Вес заявки" />\n        <input class="order-window__input" type="text" name="orderCarNumber" placeholder="Номер машины" />\n        <button class="order-window__add-field">\n          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <circle cx="10" cy="10" r="10" transform="matrix(-1 0 0 1 20 0)" fill="#E9ECF4" />\n            <path d="M13.75 9.375H10.625V6.25H9.375V9.375H6.25V10.625H9.375V13.75H10.625V10.625H13.75V9.375Z" fill="#202020" />\n          </svg>\n        </button>\n        <button class="order-window__delete-order">\n          <svg width="11" height="11" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M1.90055 0.868917L5.38085 4.34921L8.85285 0.877203L10.361 2.38533L6.88897 5.85733L10.3858 9.3542L8.86942 10.8706L5.37256 7.37375L1.87569 10.8706L0.367568 9.36248L3.86443 5.86562L0.384141 2.38533L1.90055 0.868917Z" fill="#202020" />\n          </svg>\n        </button>\n      </div>\n    ':e.innerHTML+='<p style="color: red">Максимальное кол-во заявок за раз 3.</p>'},createOrderBtn=document.querySelector(".order-window__create-order");createOrderBtn.addEventListener("click",addNewOrder);const openOrderWindowBtn=document.querySelector(".create-order"),orderWindowWrapper=document.querySelector(".create-order-window-wrapper"),createOrderWindow=document.querySelector(".create-order-window");openOrderWindowBtn.addEventListener("click",(()=>{orderWindowWrapper.classList.add("active")})),orderWindowWrapper.addEventListener("click",(e=>{createOrderWindow.contains(e.target)||orderWindowWrapper.classList.remove("active")})),initEventDelegation();const orderItems=document.querySelectorAll(".order-item");function closeCreateOrderWindow(){orderWindowWrapper.classList.remove("active")}orderItems.forEach((e=>{e.addEventListener("click",(()=>{orderInfoWrapper.classList.add("active")}))}));const orderInfoWrapper=document.querySelector(".order-info-window-wrapper"),orderInfoWindow=document.querySelector(".order-info-window"),editOrderWrapper=document.querySelector(".edit-order-window-wrapper"),editOrderWindow=document.querySelector(".edit-order-window");function openEditOrderWindow(){orderInfoWrapper.classList.remove("active"),editOrderWrapper.classList.add("active")}function closeEditOrderWindow(){orderInfoWrapper.classList.add("active"),editOrderWrapper.classList.remove("active")}function closeWindow(e){const r=document.querySelector(`.${e}`);document.querySelector(".order-window");r.classList.remove("active")}orderInfoWrapper.addEventListener("click",(e=>{orderInfoWindow.contains(e.target)||orderInfoWrapper.classList.remove("active")}));const progressBars=document.querySelectorAll(".progress");progressBars.forEach((e=>{const r=e.querySelector(".progress-value");let o=parseInt(r.textContent,10);const t=e.querySelector("svg circle:nth-child(2)"),n=t.r.baseVal.value,d=2*Math.PI*n;o>=100&&(t.style.stroke="#cc341d",o=100);const i=o/100*d;t.style.strokeDashoffset=d-i}));const addFieldBtns=document.querySelectorAll(".order-window__add-field");addFieldBtns.forEach((e=>{e.addEventListener("click",(()=>{const r=e.parentElement,o=document.createElement("input");o.classList.add("order-window__input"),o.type="text",o.name="orderCarNumber",o.placeholder="Номер авто",r.style.display="flex",r.insertBefore(o,r.lastElementChild)}))})),document.addEventListener("click",(e=>{if(e.target.closest(".order-window__add-field")){const r=e.target.closest(".order-window__order-info"),o=document.createElement("input");o.classList.add("order-window__input"),o.type="text",o.name="orderCarNumber",o.placeholder="Номер авто";const t=r.querySelectorAll(".order-window__input"),n=r.querySelector(".order-window__add-field");if(t.length>1){const e=t[t.length-2];r.insertBefore(o,e)}else r.insertBefore(o,n);r.style.display="flex"}}));const items=document.querySelectorAll(".daily-order");items.forEach(((e,r)=>{e.style.animation="fade-top .5s ease-in-out",e.style.animationDelay=50*r+"ms",e.style.animationFillMode="forwards"}));const userProfileBtn=document.querySelector(".user-profile"),userInfoContainer=document.querySelector(".user-info");userProfileBtn.addEventListener("click",(()=>{userInfoContainer.classList.toggle("active")}));